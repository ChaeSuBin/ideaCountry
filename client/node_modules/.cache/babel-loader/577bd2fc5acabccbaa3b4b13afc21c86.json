{"ast":null,"code":"var _jsxFileName = \"/home/giparang/threadweb/sinsekai/client/src/components/cooperate.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { CooperInput } from \"./cooperInput\";\nimport { CoopAccept } from \"./cooperInput\";\nimport { putUpdateIdea } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Cooperate = _ref => {\n  _s();\n\n  let {\n    content,\n    account,\n    writer\n  } = _ref;\n  const [flag, setFlag] = useState(false);\n  const [flag2, setFlag2] = useState(false);\n  const [advices, setAdvices] = useState([]);\n  const [repl, setRepl] = useState({\n    filename: '',\n    account: '',\n    id: null\n  });\n  const [acceptNum, setAccept] = useState(0);\n  const [waiteNum, setWaite] = useState(0);\n  useEffect(() => {\n    let acceptNum = 0;\n    let waiteNum = 0;\n    getReply(content.id).then(result => {\n      for (let fori = 0; fori < result.length; ++fori) {\n        if (result[fori].accept) ++acceptNum;else ++waiteNum;\n      }\n\n      setAccept(acceptNum);\n      setWaite(waiteNum);\n      setAdvices(result);\n    });\n  }, []);\n\n  const checkOwner = () => {\n    if (account === writer) return true;else {\n      alert('이 아이디어의 작성자만 협력 제안을 수락할 수 있습니다');\n      return false;\n    }\n  };\n\n  const openInNewTab = _title => {\n    const file = `https://giparang.asuscomm.com:3039/viewdocx/${_title}`;\n    const newWindow = window.open(file, '_blank', 'noopener,noreferrer');\n    if (newWindow) newWindow.opener = null;\n  };\n\n  const acceptCoop = _repl => {\n    if (checkOwner) {\n      setRepl({\n        filename: _repl.filename,\n        account: _repl.account,\n        id: _repl.id\n      });\n      setFlag2(true);\n    }\n  };\n\n  const closeRcrt = () => {\n    if (checkOwner) {\n      putUpdateIdea({\n        teamId: content.id,\n        type: 3\n      }).then(result => {\n        console.log(result);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [account === writer ? /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"fixposition\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeRcrt,\n        children: \"\\uC544\\uC774\\uB514\\uC5B4 \\uC9C4\\uD589\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          margin: 'inherit'\n        },\n        children: \"\\uD611\\uB825 \\uC694\\uAD6C\\uC0AC\\uD56D / \\uCC38\\uC5EC\\uC0C1\\uD669\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), content.recruit, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0\n        },\n        children: [\"\\uCC38\\uC5EC\\uC790 \\uC218: \", acceptNum]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0\n        },\n        children: [\"\\uB300\\uAE30\\uC790 \\uC218: \", waiteNum]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button02\",\n        onClick: () => setFlag(true),\n        children: \"\\uC774 \\uC544\\uC774\\uB514\\uC5B4\\uC5D0 \\uCC38\\uC5EC\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), advices.map((replys, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '17px',\n          margin: 'auto',\n          color: '#577070'\n        },\n        children: [replys.account, \"\\uB2D8\\uC758 \\uC81C\\uC548\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), replys.description, /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [replys.accept === false ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"replState\",\n          onClick: () => acceptCoop(replys),\n          children: [\"\\uC694\\uAD6C\\uC9C0\\uBD84: \", replys.tokn, \"%  \\uC0C1\\uD0DC: \\uC218\\uB77D\\uB300\\uAE30\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 40\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"replState\",\n          children: [\"\\uC694\\uAD6C\\uC9C0\\uBD84: \", replys.tokn, \"%  \\uC0C1\\uD0DC: \\uD611\\uB825\\uC911\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 133\n        }, this), replys.filename === null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: \"\\uC81C\\uC548\\uBB38\\uC11C \\uC5C6\\uC74C\"\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"replState\",\n          onClick: () => openInNewTab(replys.filename),\n          children: \"\\uC81C\\uC548\\uBB38\\uC11C \\uC5F4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 54\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(CooperInput, {\n      showFlag: flag,\n      account: account,\n      cont: content,\n      owner: writer,\n      onClose: () => setFlag(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CoopAccept, {\n      showFlag: flag2,\n      teamId: content.id,\n      replInfo: repl,\n      onClose: () => setFlag2(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Cooperate, \"eKI/s3jCfYcxhXQHDIWWa0U35fw=\");\n\n_c = Cooperate;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cooperate\");","map":{"version":3,"names":["React","useState","useEffect","CooperInput","CoopAccept","putUpdateIdea","Cooperate","content","account","writer","flag","setFlag","flag2","setFlag2","advices","setAdvices","repl","setRepl","filename","id","acceptNum","setAccept","waiteNum","setWaite","getReply","then","result","fori","length","accept","checkOwner","alert","openInNewTab","_title","file","newWindow","window","open","opener","acceptCoop","_repl","closeRcrt","teamId","type","console","log","margin","recruit","map","replys","index","fontSize","color","description","tokn"],"sources":["/home/giparang/threadweb/sinsekai/client/src/components/cooperate.js"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { CooperInput } from \"./cooperInput\";\nimport { CoopAccept } from \"./cooperInput\";\nimport { putUpdateIdea } from \"../api\";\n\nexport const Cooperate = ({content, account, writer}) => {\n    const [flag , setFlag] = useState(false);\n    const [flag2 , setFlag2] = useState(false);\n    const [advices, setAdvices] = useState([]);\n    const [repl, setRepl] = useState({filename:'', account:'', id:null});\n    const [acceptNum , setAccept] = useState(0);\n    const [waiteNum , setWaite] = useState(0);\n  \n    useEffect(()=>{\n      let acceptNum = 0;\n      let waiteNum = 0;\n      getReply(content.id).then(result => {\n        for(let fori=0; fori < result.length; ++fori){\n          if(result[fori].accept)\n            ++acceptNum;\n          else\n            ++waiteNum;\n        }\n        setAccept(acceptNum);\n        setWaite(waiteNum);\n        setAdvices(result);\n      })\n    },[]);\n    const checkOwner = () => {\n      if(account === writer) return true;\n      else{\n        alert('이 아이디어의 작성자만 협력 제안을 수락할 수 있습니다');\n        return false;\n      }\n    }\n    const openInNewTab = (_title) => {\n      const file = `https://giparang.asuscomm.com:3039/viewdocx/${_title}`;\n      const newWindow = window.open(file, '_blank', 'noopener,noreferrer');\n        if (newWindow) newWindow.opener = null;\n    }\n    const acceptCoop = (_repl) => {\n      if(checkOwner){\n        setRepl({filename: _repl.filename, account: _repl.account, id:_repl.id});\n        setFlag2(true);\n      }\n    }\n    const closeRcrt = () => {\n      if(checkOwner){\n        putUpdateIdea({teamId: content.id, type: 3}).then(result => {\n          console.log(result);\n        })\n      }\n    }\n    return(\n      <>\n        {account===writer ? <section className='fixposition'>\n        <button onClick={closeRcrt}>아이디어 진행</button>\n        </section>:<></>}\n        <ul>\n          <li style={{margin: 'inherit'}}>협력 요구사항 / 참여상황</li>\n          {content.recruit}<br/><br/>\n          <p style={{margin: 0}}>참여자 수: {acceptNum}</p>\n          <p style={{margin: 0}}>대기자 수: {waiteNum}</p>\n          <br/>\n          <button className='button02' onClick={()=>setFlag(true)}>이 아이디어에 참여하기</button>\n        </ul>\n        {advices.map((replys, index) => (\n          <li key={index}>\n            <p style={{fontSize:'17px', margin:'auto', color:'#577070'}}>{replys.account}님의 제안</p>\n            {replys.description}\n            <section>\n              {replys.accept===false ? <p className='replState' onClick={()=>acceptCoop(replys)}>요구지분: {replys.tokn}%  상태: 수락대기</p>:<p className='replState'>요구지분: {replys.tokn}%  상태: 협력중</p>}\n              {replys.filename===null ? <>제안문서 없음</>:<p className='replState' onClick={()=>openInNewTab(replys.filename)}>제안문서 열기</p>}\n            </section>\n          </li>\n        ))}\n        <CooperInput \n        showFlag={flag} account={account} \n        cont={content} owner={writer}\n        onClose={()=>setFlag(false)}/>\n        <CoopAccept\n          showFlag={flag2}\n          teamId={content.id}\n          replInfo={repl}\n          onClose={()=>setFlag2(false)}/>\n      </>\n    )\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}